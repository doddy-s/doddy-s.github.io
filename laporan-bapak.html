<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laporan Bapak</title>
    <script>
        function createLaporanBapak() {
            let input = document.getElementById('laporan').value
            input = input.replace(/\*/g, '')

            let gakkumInfo
            let turjawaliInfo
            
            try {
                gakkumInfo = input.match(/GIAT GAK[\s\S]+?Lainnya\s*:\s*\d+\s*kali/g)[0]
            } catch (error) {
                alert(error)
            }
            
            try {
                turjawaliInfo = input.match(/GIAT TUR[\s\S]+?Patroli\s*:\s*\d+\s*kali/g)[0]
            } catch (error) {
                alert(error)
            }

            const weekday = ["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]
            const months = [
                "Januari", "Februari", "Maret", "April", "Mei", "Juni",
                "Juli", "Agustus", "September", "Oktober", "November", "Desember"
            ]

            const currentDate = new Date()
            const day = weekday[currentDate.getDay()]
            const date = currentDate.getDate()
            const month = months[currentDate.getMonth()]
            const year = currentDate.getFullYear()

            console.log(day, date, month, year)


            const text = `Kepada : Yth ,
1. KAKORLANTAS POLRI
2. KAPOLDA DIY

Dari        :
DIRLANTAS POLDA DIY

Perihal   : Laporan Situasi Kamseltibcarlantas Subditgakkum dan Jajaran Ditlantas Polda DIY

Dilaporkan JENDERAL, Situasi Kamseltibcarlantas pada hari ${day} tanggal ${date} ${month} ${year} sbb :

1. ${gakkumInfo}

2. ${turjawaliInfo}

Terlampir Data jumlah Kejadian dan data Korban kecelakaan.

Demikian JENDERAL yang dapat kami laporkan.

Tembusan:
1. DIRGAKKUM KORLANTAS POLRI`

            var dummy = document.createElement("textarea")
            document.body.appendChild(dummy)
            dummy.value = text
            dummy.select()
            document.execCommand("copy")
            document.body.removeChild(dummy)
        }
    </script>
    <style>
        .w-full {
            width: 100%;
        }

        .w-99 {
            width: 99%;
        }

        .h-12 {
            height: 3rem;
        }
    </style>
</head>
<body>
    <textarea name="laporan" id="laporan" rows="30" 
    placeholder=
"=> Copy laporan di sini
=> Click 'Create' untuk membuat laporan"
    class="w-99"></textarea>
    <br>
    <button class="w-full h-12" onclick="createLaporanBapak()">Create</button>
</body>
</html>